<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
        <link href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" rel="stylesheet" />
        <style>
            .useful-width{
                /* center the html elements */
                max-width: 800px;
                margin-left: auto;
                margin-right: auto;
            }
        </style>
        <script>
            window.onload = function() {
                const host = window.location.host;
                let path = window.location.pathname;
                if (path.endsWith('index.html')) {
                    path = path.substr(path, path.length - 'index.html'.length);
                }
                const instanceId = Math.random().toString(36).substring(2, 15);

                const maps = [
                    {id:'amsterdam', map:'maps/amsterdam/amsterdam.json'},
                    {id:'bar', map:'maps/bar/bar.json'},
                    {id:'barcelone', map:'maps/barcelone/barcelone.json'},
                    {id:'brussels', map:'maps/brussels/brussels.json'},
                    {id:'v', map:'maps/cyber/cyber.json'},
                    {id:'dusseldorf', map:'maps/dusseldorf/dusseldorf.json'},
                    {id:'lausane', map:'maps/lausane/lausane.json'},
                    {id:'milan', map:'maps/milan/milan.json'},
                    {id:'telaviv', map:'maps/telaviv/telaviv.json'},
                    {id:'veronerdc', map:'maps/verone/veronerdc.json'},
                    {id:'verone-1', map:'maps/verone/verone-1.json'},
                    {id:'vp-quest', map:'maps/vp-quest/vp-quest.json'},
                    {id:'warehouse', map:'maps/warehouse/warehouse.json'},
                    {id:'bar', map:'maps/warehouse/bar.json'},
                    {id:'warsaw', map:'maps/warsaw/warsaw.json'},
                ];

                const mapsElement = document.getElementById('maps');
                maps.forEach(({map, id}) => {
                    const url = `https://play.workadventu.re/_/${instanceId}/${host}/${map}`;
                    const text = document.createElement('p');
                    text.innerHTML = `<br/> You can test map <strong>${id}</strong>:`;

                    const link = document.createElement('a');
                    link.href = url;
                    link.innerText = url;
                    link.target = '_blank';

                    mapsElement.appendChild(text);
                    mapsElement.appendChild(link);
                });
            };
        </script>
    </head>
    <body>
        <div class="useful-width">
            <div style="text-align: center; margin-top: 3rem">
                <img src="https://workadventu.re/img/logo.png" alt=""/>
            </div>
            <div class="nes-container with-title is-centered" style="margin-top: 3rem">
                <p class="title">WorkAdventure map</p>
                <p>This website contains a map for <a href="https://workadventu.re">Workadventu.re</a>.</p>
            </div>

            <div id="maps" class="nes-container with-title is-centered" style="margin-top: 1rem">
            </div>

            <div class="nes-container with-title is-centered" style="margin-top: 1rem">
                <p class="title">Happy with the result?</p>
                <p>Register your room on Workadventu.re.</p>
                <p><a id="gettingStartedLink" href="https://workadventu.re/getting-started" class="nes-btn is-primary">Create a new room</a></p>
                <p>or copy and paste the map URL in WorkAdventu.re's administration panel:</p>
                <p><span id="mapUrl" style="color: gray" /></p>
            </div>
        </div>
    </body>
</html>
